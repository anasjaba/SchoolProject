{% extends "base.twig" %}
{% set active_page = "author_submissions" %}

{% block title %}Submission{% endblock %}

{% block content %}
  <script type="text/javascript">
    $(document).ready(function(){
      $('#decisionSelect').on('change', function() {
        $('#decisionAlert').removeClass('hidden');
      });
    });
  </script>

  <h1 class="page-header">Submission #{{ id }} <small> - Published</small></h1>
  <ol class="breadcrumb">
    <li><a href="{{ app.url_generator.generate('author_dashboard') }}">Home</a></li>
    <li><a href="{{ app.url_generator.generate('author_submissions') }}">My submissions</a></li>
    <li class="active">Submission #{{ id }}</li>
  </ol>

  <div class="row">

    <div class="col-md-9">
      <input type="text" class="form-control input-lg" value="Latex programming language tutorial" />
      <br />

      <div id="main-summary">
        <table>
          <tbody>
              <tr>
                <th style="width: 75px;">Author</th>
                <td>
                  Louis Racicot, Samuel Rondeau 
                  <a href="mailto:#"> <span class="glyphicon glyphicon-envelope" aria-hidden="true"></span></a>
                </td>
              </tr>
              <tr>
                <th>
                  Section
                </th>
                <td>
                  {% if role == 'editor' %}
                    <select class="form-control">
                      <option selected>Article</option>
                      <option>Section 2</option>
                      <option>Section 3</option>
                    </select>
                  {% endif %}
                  {% if role == 'author' %}
                      Article
                  {% endif %}
                </td>
              </tr>
              <tr>
                <th>Editor</th>
                <td>
                  Michel Desmarais
                  <a href="mailto:#"> <span class="glyphicon glyphicon-envelope" aria-hidden="true"></span></a>
                </td>
              </tr>
          </tboy>
        </table>
      </div>
      <br />

      <div role="tabpanel">

        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
          <li role="presentation" class="active"><a href="#summary" aria-controls="summary" role="tab" data-toggle="tab">Summary</a></li>
          <li role="presentation"><a href="#review" aria-controls="review" role="tab" data-toggle="tab">Review</a></li>
          <li role="presentation"><a href="#editing" aria-controls="editing" role="tab" data-toggle="tab">Editing</a></li>
          <li role="presentation"><a href="#metedata" aria-controls="metedata" role="tab" data-toggle="tab">Metadata</a></li>
          {% if role == 'author' %}
            <li role="presentation"><a href="#refbacks" aria-controls="refbacks" role="tab" data-toggle="tab">Refbacks</a></li>
          {% endif %}
          {% if role == 'editor' %}
            <li role="presentation"><a href="#references" aria-controls="references" role="tab" data-toggle="tab">References</a></li>
          {% endif %}
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
          <div role="tabpanel" class="tab-pane active" id="summary">
            <p>&nbsp;</p>
            <table>
              <tbody>
                  <tr>
                    <th style="width: 125px;">Original file</th>
                    <td>
                      <div class="well">
                        <a href="#"><span class="glyphicon glyphicon-file"></span> 1-2-2.CFD.docx</a>&nbsp;&nbsp;&nbsp;<small>2015-01-04</small>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th>Suppl. files</th>
                    <td>
                      <a href="#">1-SP.docx</a>&nbsp;&nbsp;&nbsp;<small>2015-01-04</small>
                    </td>
                  </tr>
                  <tr>
                    <th>&nbsp;</th>
                    <td>
                      <a href="#">figure1.png</a>&nbsp;&nbsp;&nbsp;<small>2015-01-05</small>
                    </td>
                  </tr>
                  <tr>
                    <th>&nbsp;</th>
                    <td>
                      <a href="#">readme.txt</a>&nbsp;&nbsp;&nbsp;<small>2015-01-07</small>
                    </td>
                  </tr>
                  <tr>
                    <th>&nbsp;</th>
                    <td>
                      <button class="btn btn-xs"><span class="glyphicon glyphicon-plus"></span> Add file</button>
                    </td>
                  </tr>
                  <tr>
                    <th>&nbsp;</th>
                  </tr>
                  <tr>
                    <th>Authors</th>
                    <td>
                      <div class="author-summary">
                        <strong>Louis Racicot</strong> <a href="mailto:#"><span class="glyphicon glyphicon-envelope" aria-hidden="true"></span></a><br />
                        <em>École Polytechnique de Montréal</em><br />
                        <a href="#">Visit profile</a>
                      </div>
                      <div class="author-summary">
                        <strong>Samuel Rondeau</strong> <a href="mailto:#"><span class="glyphicon glyphicon-envelope" aria-hidden="true"></span></a><br />
                        <em>Université de Montréal</em><br />
                        <a href="#">Visit profile</a>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <th>&nbsp;</th>
                  </tr>
                  <tr>
                    <th>Language</th>
                    <td>English</td>
                  </tr>
                  <tr>
                    <th>&nbsp;</th>
                  </tr>
                  <tr>
                    <th>Abstract</th>
                    <td>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam sit amet lacus ut justo iaculis condimentum id in nisl. In vitae metus elit. Donec vel congue augue. Suspendisse sit amet justo nec ipsum pellentesque rhoncus. Sed in venenatis nisl. Quisque sed efficitur ante. Praesent in fringilla elit. Aenean pellentesque imperdiet turpis, et aliquam lorem feugiat sit amet. Sed mi ligula, lacinia sit amet imperdiet et, finibus a elit. Ut imperdiet ligula quis gravida finibus. Vestibulum pellentesque porttitor convallis. Duis finibus lectus a nisi blandit, non ultricies erat congue.</td>
                  </tr>
                  <tr>
                    <th>&nbsp;</th>
                  </tr>
                  <tr>
                    <th>Supporting Agencies</th>
                    <td>Agency 1<br /> Agency 2<br /> Agency 3</td>
                  </tr>
                  <tr>
                    <th>&nbsp;</th>
                  </tr>
                  <tr>
                    <th>References</th>
                    <td>http://ref1.com<br />http://ref2.com</td>
                  </tr>
              </tbody>
            </table>
          </div>
          <div role="tabpanel" class="tab-pane" id="review">
            <h3>Round 1<br /><small>Since 2015-01-01</small></h3>
            <table>
              <tr>
                <th style="width: 125px;">Reviewer</th>
                <td><a>sirius</a></td>
              </tr>
              <tr>
                <th style="width: 125px;">Review Version</th>
                <td><a href="#"><span class="glyphicon glyphicon-file"></span> 1-2-1.RV.PDF</a>&nbsp;&nbsp;&nbsp;<small>2015-01-04</small></td>
              </tr>
              <tr>
                <th style="width: 125px;">Uploaded file</th>
                <td><em>None</em></td>
              </tr>
            </table>
            <hr>

            <h3>Round 2<br /><small>Since 2015-01-18</small></h3>
            <table>
              <tr>
                <th style="width: 125px;">Reviewer</th>
                <td><a>lorac</a></td>
              </tr>
              <tr>
                <th style="width: 125px;">Review Version</th>
                <td><a href="#"><span class="glyphicon glyphicon-file"></span> 1-2-2.RV.PDF</a>&nbsp;&nbsp;&nbsp;<small>2015-01-20</small></td>
              </tr>
              <tr>
                <th style="width: 125px;">Uploaded file</th>
                <td><em>None</em></td>
              </tr>
            </table>
            <hr>

            <h3>Editor Decision <button class="btn"><span class="glyphicon glyphicon-envelope"></span> 
              {% if role == 'author'%}
              Notify Editor
              {% endif %}
              {% if role == 'editor'%}
              Notify Author
              {% endif %}
            </button></h3>
            <table>
              <tr>
                <th style="width: 125px;">Decision</th>
                <td>
                  {% if role == 'author'%}
                  Accepted submission <small>2015-01-25</small>
                  {% endif %}
                  {% if role == 'editor'%}
                  <select class="form-control" id="decisionSelect">
                    <option>Select decision...</option>
                    <option>Accept Submission</option>
                    <option>Open review round</option>
                    <option>Revisions required</option>
                    <option>Decline submission</option>
                  </select>
                  <div class="alert alert-warning hidden" id="decisionAlert" role="alert">
                    Please click "Save" to select reviewer. <font size="1">&lt;<a href="{{ app.url_generator.generate('editor_assign') }}">test page</a>&gt;</font>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                      &nbsp; &nbsp;<span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  {% endif %}
                </td>
              </tr>
              <tr>
                <th style="width: 125px;">Editor Version</th>
                <td><a href="#"><span class="glyphicon glyphicon-file"></span> 1-2-2.RV.PDF</a>&nbsp;&nbsp;&nbsp;<small>2015-01-20</small></td>
              </tr>
              <tr>
                <th style="width: 125px;">Author Version</th>
                <td><em>None</em></td>
              </tr>
              <tr>
                <td>&nbsp;</td>
              </tr>
              <tr>
                <th style="width: 125px;">Upload Author Version</th>
                <td><input type="file" /></td>
              </tr>
            </table>
          </div>
          <div role="tabpanel" class="tab-pane" id="editing">
            <h3>Copyediting</h3>
            <div class="tabbable tabs-left">
              <ul class="nav nav-tabs">
                <li><a href="#a" class="bg-primary" data-toggle="tab">1. Initial Copyedit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="glyphicon glyphicon-menu-right"></span></a></li>
                <li><a href="#b" class="bg-primary" data-toggle="tab">2. Author Copyedit&nbsp;&nbsp;&nbsp;<span class="glyphicon glyphicon-menu-right"></span></a></li>
                <li class="active"><a href="#c" class="bg-primary" data-toggle="tab">3. Final Copyedit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="glyphicon glyphicon-menu-right"></span></a></li>
              </ul>
              <div class="tab-content" style="min-height:150px">
                <div class="tab-pane" id="a">
                  <table>
                    <tr>
                      <th style="width: 150px">Request</th>
                      <td>--</td>
                    </tr>
                    <tr>
                      <th>Underway</th>
                      <td>--</td>
                    </tr>
                    <tr>
                      <th>Complete</th>
                      <td>2015-01-05</td>
                    </tr>
                    <tr>
                      <td colspan="2">
                        <div class="well">
                          <a href="#"><span class="glyphicon glyphicon-download-alt"></span> 1-2-2.CFD.docx</a>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>

                {% if role == 'author' %}
                  <div class="tab-pane" id="b">
                    <table>
                      <tr>
                        <th style="width: 150px">Request</th>
                        <td>2015-01-05</td>
                      </tr>
                      <tr>
                        <th>Underway</th>
                        <td>2015-01-05</td>
                      </tr>
                      <tr>
                        <th>Complete</th>
                        <td>--</td>
                      </tr>
                      <tr>
                        <th>&nbsp</th>
                      </tr>
                      <tr>
                        <td colspan="2">
                          <button class="btn btn-lg" type="button" data-toggle="modal" data-target="#uploadModal">
                            <span class="glyphicon glyphicon-upload"></span> Upload file
                          </button>
                          <button class="btn btn-primary btn-lg"><span class="glyphicon glyphicon-envelope"></span> Complete</button>
                        </td>
                      </tr>
                    </table>
                  </div>
                {% endif %}

                {% if role == 'editor' %}
                  <div class="tab-pane" id="b">
                    <table>
                      <tr>
                        <th style="width: 150px">Request</th>
                        <td>--</td>
                      </tr>
                      <tr>
                        <th>Underway</th>
                        <td>--</td>
                      </tr>
                      <tr>
                        <th>Complete</th>
                        <td>2015-01-15</td>
                      </tr>
                      <tr>
                        <td colspan="2">
                          <div class="well">
                            <a href="#"><span class="glyphicon glyphicon-download-alt"></span> 1-2-3.CFD.docx</a>
                          </div>
                        </td>
                      </tr>
                    </table>
                  </div>
                {% endif %}
                {% if role == 'author' %}
                  <div class="tab-pane active" id="c">
                    <em>Waiting for the final copyedit. The editor may complete this action soon.</em>
                  </div>
                {% endif %}
                {% if role == 'editor' %}
                  <div class="tab-pane active" id="c">
                    <table>
                      <tr>
                        <th style="width: 150px">Request</th>
                        <td>2015-01-05</td>
                      </tr>
                      <tr>
                        <th>Underway</th>
                        <td>2015-01-05</td>
                      </tr>
                      <tr>
                        <th>Complete</th>
                        <td>--</td>
                      </tr>
                      <tr>
                        <th>&nbsp;</th>
                      </tr>
                      <tr>
                        <td colspan="2">
                          <button class="btn btn-lg" type="button"  data-toggle="modal" data-target="#uploadModal">
                            <span class="glyphicon glyphicon-upload"></span> Upload file
                          </button>
                          <button class="btn btn-primary btn-lg"><span class="glyphicon glyphicon-envelope"></span> Complete</button>
                        </td>
                      </tr>
                    </table>
                  </div>
                  {% endif %}
              </div>
            </div>
            <hr />

            {% if role == 'editor' %}
              <h3>Editors</h3>
              <div style="width: 200px;">
                <hr />
                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>&nbsp;&nbsp;&nbsp;&nbsp;
                  <a href="#">sirius</a><br>
                <hr />
              </div>
              <button type="button" class="btn"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                &nbsp;Add editor</button>&nbsp;
              <button type="button" class="btn"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                &nbsp;Add self</button>
            {% endif %}
            <hr />

            {% if role == 'editor' %}
            <h3>Scheduling</h3>
            ...
            <hr />
            {% endif %}
            <h3>Layout</h3>
            ...
            <hr />
            <h3>Proofreading</h3>
            ...
          </div>
          <div role="tabpanel" class="tab-pane" id="metedata">
            [Formulaire d'édition]
          </div>
          <div role="tabpanel" class="tab-pane" id="refbacks">
            <table class="table">
              <thead>
                <tr>
                  <th>Date added</th>
                  <th>Hits</th>
                  <th>URL</th>
                  <th>Title</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="6" style="text-align:center"><em>There are currently no refbacks.</em></td>
                </tr>
              </tbody>
            </table>
          </div>
          <div role="tabpanel" class="tab-pane" id="references">
            [WELCOME TO THE CITATION MARKUP ASSISTANT!]
          </div>
        </div>

      </div>
    </div>

    <div class="col-md-3">
      <form>
        <div class="form-group">
          <button type="button" class="btn btn-primary btn-lg"><span class="glyphicon glyphicon-floppy-disk"></span> Save</button>
        </div>
        <div class="form-group">
          <label >Status</label><br />
          {% if role == 'author'%}
            <em>Published</em><br />since 2015-03-01
          {% endif %}
          {% if role == 'editor'%}
            <select class="form-control">
              <option>In editing</option>
              <option selected>Published</option>
              <option>Rejected</option>
            </select>
            <br />since 2015-03-01
          {% endif %}
        </div>
        <div class="form-group">
          <label>Last modified</label><br />
          2015-02-28
        </div>
        <div class="form-group">
          <label>Date submitted</label><br />
          2015-02-20
        </div>

        {% if role == 'editor' %}
          <button class="btn"><span class="glyphicon glyphicon-time" aria-hidden="true"></span> View history</button>
        {% endif %}
    </form>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="uploadModal" tabindex="-1" role="dialog" aria-labelledby="uploadModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="uploadModalLabel">Upload file</h4>
        </div>
        <div class="modal-body">
          ...
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary">Send</button>
        </div>
      </div>
    </div>
  </div>

{% endblock %}